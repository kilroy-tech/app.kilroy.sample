<xml xmlns="http://www.w3.org/1999/xhtml"><block type="workflow_start" id="b8y9fJggqk+VoJzGC-cI" deletable="false" x="190" y="50"><field name="name">kilroy.sample/manager/ui_new_widget</field><field name="version">1</field><field name="description"></field><field name="interactive">TRUE</field><field name="clean_up">TRUE</field><value name="OUTPUTS"><block type="process_variable_all" id="[baP4qH?m`vxpMcn}C4z"><mutation variable_count="2"></mutation><value name="INPUT0"><block type="process_variable" id="6ReKJH,wptQ3tuwIF/e7"><field name="process_variable_val">msg</field></block></value><value name="INPUT1"><block type="process_variable" id="JqLWOll/Ps!_1QQ-[ISC"><field name="process_variable_val">widget_*</field></block></value></block></value><next><block type="step_group" id="@5#DWeAnwxT4Tf3(T2xd"><field name="role">*</field><field name="timer">24</field><field name="interactive">TRUE</field><field name="can_terminate">TRUE</field><field name="message"></field><statement name="success"><block type="comment" id="Z~WrA.RRdrOI=T2s2EY]"><field name="comment">This form (picker) is generated inside the</field><next><block type="comment" id="H[1Z[3e9rHJ7QGH{{1at"><field name="comment">Workflow Script, in the "begin" function.</field><next><block type="comment" id="[Whl;gs@1oJEdEe(79.P"><field name="comment">It creates a dynamic form object in "formObj" with</field><next><block type="comment" id="Gxn!+B4.tK6nD9*k@;#O"><field name="comment">a drop-down of the current templates to choose from.</field><next><block type="display_inline_form" id="0r~:#nItsO;/{6DRp$WZ"><field name="form_id">picker</field><statement name="form_data"><block type="form_from_data" id="@e_w}aM5azV/`k|wv3ol"><field name="form_data">${formObj}</field></block></statement><statement name="success"><block type="comment" id="iXK?W=%VNvU:KfZgJ]QW"><field name="comment">define defaults for form fields...</field><next><block type="set_var_to" id="a2q$QZ^*$uDET8(*bB!j"><field name="var_name">formData</field><value name="var_expr"><block type="var_new_obj" id="`P?fdmv_jwrt)fzY=)Ou"></block></value><next><block type="comment" id="BeOOQPpeO)K#4x^54`2H"><field name="comment">If the user didn't want a template....</field><next><block type="if_then_else" id="#vABMOy8xoSz1U-Vzn-v"><field name="condition">"${template}" == "-"</field><statement name="then"><block type="set_obj_to" id="o$Fa2Nt}5:)#Y=7Lg8+]"><field name="var_name">formData</field><field name="field_name">widget_desc</field><value name="var_expr"><block type="var_variable" id="%{tjEx5+Ve${9Bqny1^R"><field name="var_name">widget_desc</field></block></value><next><block type="set_obj_to" id=":feTM2j?96GAybI(^?xj"><field name="var_name">formData</field><field name="field_name">widget_style</field><value name="var_expr"><block type="var_variable" id="IuyZK8`9,{B%fXnFxY}^"><field name="var_name">widget_style</field></block></value><next><block type="set_value" id="f*Lv$._;Oss[q~QPqq7s"><field name="variable">template</field><field name="value"></field></block></next></block></next></block></statement><statement name="else"><block type="comment" id="_FZyO$Po2|!nl5/v)iyk"><field name="comment">...otherwise use the template's values from settings</field><next><block type="set_var_to" id="RZ^em/D5cq%YO!O(b~#H"><field name="var_name">settings</field><value name="var_expr"><block type="var_load_app_settings" id="3dy*4yB7jpI*^(77qB#*"></block></value><next><block type="set_var_to" id="Gs$O2@Zm7/Vn$^VTWZUG"><field name="var_name">temp</field><value name="var_expr"><block type="var_object" id="_}n/z.ntlQNyT;HJ!OX9"><field name="obj_name">settings</field><field name="field_name">${template}</field></block></value><next><block type="set_obj_to" id="[tmB@f*vpm=pC)dT/+*="><field name="var_name">formData</field><field name="field_name">widget_desc</field><value name="var_expr"><block type="var_object" id=";`v2D;a4Y)}hUZ,|!:?x"><field name="obj_name">temp</field><field name="field_name">desc</field></block></value><next><block type="set_obj_to" id="8cx;`[t|8kz;_#dSJ{da"><field name="var_name">formData</field><field name="field_name">widget_style</field><value name="var_expr"><block type="var_object" id="z3j3Hp)pCI*}h1|,#nE}"><field name="obj_name">temp</field><field name="field_name">style</field></block></value></block></next></block></next></block></next></block></next></block></statement><next><block type="comment" id="]nZ7Q}02^fhLXa@lcQn~"><field name="comment">...and show the config form</field><next><block type="simple_inline_form" id="*K!t3rjqZ;yACD[wn@hJ"><field name="form_id">default</field><field name="sif_title">Start a new widget...</field><field name="sif_desc">${template}</field><statement name="form_field_data"><block type="form_text_field" id="D6pUeGD8B1g[If5]#_%i"><field name="form_field_name">widget_desc</field><field name="form_field_label">Description</field><field name="form_field_placeholder"></field><next><block type="form_dropdown" id="(!$#Ldp1z_dv?~lbkm2C"><field name="form_field_name">widget_style</field><field name="form_field_label">Style</field><statement name="form_field_pairs"><block type="form_field_pair" id="D0vY],1;K:qt_$%P3O$+"><field name="field_label">Light</field><field name="field_value_type">int</field><field name="field_value">0</field><next><block type="form_field_pair" id="$Yt=HLfwTL#ZblAB$.0e"><field name="field_label">Dark</field><field name="field_value_type">int</field><field name="field_value">1</field><next><block type="form_field_pair" id="UB.vv{Ce*#A79SYxS%Es"><field name="field_label">Dim</field><field name="field_value_type">int</field><field name="field_value">2</field><next><block type="form_field_pair" id="-saYbtKk[l+(Y|C)Jm3I"><field name="field_label">Blueprint</field><field name="field_value_type">int</field><field name="field_value">3</field></block></next></block></next></block></next></block></statement></block></next></block></statement><statement name="success"><block type="start_app_diagram" id="iPi5oQ.c7(~RSgEo#L{}"><field name="pdclass">widget</field><field name="pdalias"></field><field name="pddesc">Widget: ${widget_desc}</field><field name="pdargs">{"ex_style":"${widget_style}","desc":"${widget_desc}"}</field><next><block type="set_var_to" id="N`Q[sjpS/:pH*RXCQ-Ly"><field name="var_name">res</field><value name="var_expr"><block type="var_results" id="KiCJ~RQOm?r)z*M+Ab;,"></block></value><next><block type="show_app_diagram" id="xSO3zeb@!dwcj9:?Cu!x"><field name="pdalias">${res}</field><next><block type="set_value" id="D]8+JKX/t#b(*yRzz/93"><field name="variable">msg</field><field name="value">Launched widget ${res}</field></block></next></block></next></block></next></block></statement><statement name="failure"><block type="set_value" id="wir+OB0^ur|GvIWt#i$g"><field name="variable">msg</field><field name="value">Widget launch was cancelled.</field></block></statement></block></next></block></next></block></next></block></next></block></next></block></statement><statement name="failure"><block type="set_value" id="L}!}f4{)DDv{6M{Kl=PP"><field name="variable">msg</field><field name="value">Widget launch was cancelled.</field></block></statement></block></next></block></next></block></next></block></next></block></statement><next><block type="workflow_end" id="Ub?h9a`t,Etsd=M0U|uJ"></block></next></block></next></block></xml>